{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/pulga/Documents/MERN/Mernbelt Final/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/pulga/Documents/MERN/Mernbelt Final/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/pulga/Documents/MERN/Mernbelt Final/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./petsCreate.css';import{useEffect,useState}from\"react\";import axios from'axios';import{Link,useNavigate,useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PetsCreatePage(){var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),type=_useState4[0],setType=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),skills=_useState8[0],setSkills=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),pet=_useState12[0],setPet=_useState12[1];var _useState13=useState(true),_useState14=_slicedToArray(_useState13,2),isLoading=_useState14[0],setLoading=_useState14[1];function createUpdate(){return _createUpdate.apply(this,arguments);}function _createUpdate(){_createUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var isCreating,response,body;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:isCreating=!id;response=null;setError(null);if(!(!name||!type||!description)){_context.next=7;break;}setError(\"Campos vacíos\");_context.next=18;break;case 7:body={name:name,type:type,description:description,skillOne:skills.one,skillTwo:skills.two,skillThree:skills.three};if(!isCreating){_context.next=14;break;}_context.next=11;return createPet(body);case 11:response=_context.sent;_context.next=17;break;case 14:_context.next=16;return updatePet(body);case 16:response=_context.sent;case 17:if(response.status===200||response.status===201){navigate('/');}else{setError(response.response.data.messages.join());}case 18:case\"end\":return _context.stop();}},_callee);}));return _createUpdate.apply(this,arguments);}function createPet(_x){return _createPet.apply(this,arguments);}function _createPet(){_createPet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(body){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('http://localhost:3000/pets',body).catch(function(err){return err;});case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}},_callee2);}));return _createPet.apply(this,arguments);}function updatePet(_x2){return _updatePet.apply(this,arguments);}function _updatePet(){_updatePet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(body){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.patch(\"http://localhost:3000/pets/\".concat(id),body).catch(function(err){return err;});case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}},_callee3);}));return _updatePet.apply(this,arguments);}function getPets(){return _getPets.apply(this,arguments);}function _getPets(){_getPets=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var petResponse;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get(\"http://localhost:3000/pets/\".concat(id));case 2:petResponse=_context4.sent;setPet(petResponse.data);setName(petResponse.data.name);setType(petResponse.data.type);setDescription(petResponse.data.description);setSkills({one:petResponse.data.skillOne,two:petResponse.data.skillTwo,three:petResponse.data.skillThree});setLoading(false);case 9:case\"end\":return _context4.stop();}},_callee4);}));return _getPets.apply(this,arguments);}useEffect(function(){if(id)getPets();else setLoading(false);},[]);return/*#__PURE__*/_jsxs(\"div\",{id:\"petCreate\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Pet Shelter\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"back to home\"})]}),isLoading?'Cargando...':/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:!id?/*#__PURE__*/_jsx(\"h3\",{children:\"Know a pet needing a home?\"}):/*#__PURE__*/_jsxs(\"h3\",{children:[\"Edit: \",pet.name]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{defaultValue:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Type:\"}),/*#__PURE__*/_jsx(\"input\",{defaultValue:type,onChange:function onChange(e){return setType(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"input\",{defaultValue:description,onChange:function onChange(e){return setDescription(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:createUpdate,children:!id?'Add Pet':'Edit Pet'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Skill 1:\"}),/*#__PURE__*/_jsx(\"input\",{defaultValue:skills.one,onChange:function onChange(e){return setSkills({one:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Skill 2:\"}),/*#__PURE__*/_jsx(\"input\",{defaultValue:skills.two,onChange:function onChange(e){return setType({two:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Skill 3:\"}),/*#__PURE__*/_jsx(\"input\",{defaultValue:skills.three,onChange:function onChange(e){return setDescription({three:e.target.value});}})]})]})]})]})]});}export default PetsCreatePage;","map":{"version":3,"names":["useEffect","useState","axios","Link","useNavigate","useParams","PetsCreatePage","id","navigate","name","setName","type","setType","description","setDescription","skills","setSkills","error","setError","pet","setPet","isLoading","setLoading","createUpdate","isCreating","response","body","skillOne","one","skillTwo","two","skillThree","three","createPet","updatePet","status","data","messages","join","post","catch","err","patch","getPets","get","petResponse","e","target","value"],"sources":["C:/Users/pulga/Documents/MERN/Mernbelt Final/client/src/views/PetsCreatePage/PetsCreatePage.js"],"sourcesContent":["import './petsCreate.css';\nimport {useEffect, useState} from \"react\";\nimport axios from 'axios';\nimport {Link, useNavigate, useParams} from \"react-router-dom\";\n\nfunction PetsCreatePage() {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const [name, setName] = useState(\"\");\n    const [type, setType] = useState(\"\");\n    const [description, setDescription] = useState(\"\");\n    const [skills, setSkills] = useState({});\n    const [error, setError] = useState(null);\n    const [pet, setPet] = useState([]);\n    const [isLoading, setLoading] = useState(true);\n\n    async function createUpdate() {\n        const isCreating = !id;\n        let response = null;\n        setError(null);\n        if(!name || !type || !description) setError(\"Campos vacíos\");\n        else {\n            const body = {\n                name: name,\n                type: type,\n                description: description,\n                skillOne: skills.one,\n                skillTwo: skills.two,\n                skillThree: skills.three,\n            };\n\n            if(isCreating) response = await createPet(body);\n            else response = await updatePet(body);\n\n            if(response.status === 200 || response.status === 201) {\n                navigate('/');\n            } else {\n                setError(response.response.data.messages.join());\n            }\n        }\n    }\n\n    async function createPet(body) {\n        return await axios.post('http://localhost:3000/pets', body).catch((err) => {\n            return err;\n        });\n    }\n\n    async function updatePet(body) {\n        return await axios.patch( `http://localhost:3000/pets/${id}`, body).catch((err) => {\n            return err;\n        });\n    }\n\n    async function getPets() {\n        const petResponse = await axios.get(`http://localhost:3000/pets/${id}`);\n        setPet(petResponse.data);\n        setName(petResponse.data.name);\n        setType(petResponse.data.type);\n        setDescription(petResponse.data.description);\n        setSkills({\n            one: petResponse.data.skillOne,\n            two: petResponse.data.skillTwo,\n            three: petResponse.data.skillThree,\n        });\n        setLoading(false);\n    }\n\n    useEffect(() => {\n        if(id) getPets();\n        else setLoading(false);\n    }, []);\n\n    return (\n        <div id=\"petCreate\">\n            <div className=\"header\">\n                <h1>Pet Shelter</h1>\n                <Link to=\"/\">back to home</Link>\n            </div>\n\n            {\n                isLoading ? 'Cargando...' : <div>\n                    <div className=\"header\">\n                        {\n                            !id ? <h3>Know a pet needing a home?</h3> :\n                                <h3>Edit: {pet.name}</h3>\n                        }\n                    </div>\n                    <div className=\"container-info\">\n                        <div className=\"left\">\n                            <div className=\"row\">\n                                <label>Name:</label>\n                                <input defaultValue={name} onChange={(e) => setName(e.target.value)} />\n                            </div>\n\n                            <div className=\"row\">\n                                <label>Type:</label>\n                                <input defaultValue={type} onChange={(e) => setType(e.target.value)} />\n                            </div>\n\n                            <div className=\"row\">\n                                <label>Description:</label>\n                                <input defaultValue={description} onChange={(e) => setDescription(e.target.value)} />\n                            </div>\n                            <div className=\"row\">\n                                <p>{error}</p>\n                                <button onClick={createUpdate}>\n                                    {!id ? 'Add Pet' : 'Edit Pet'}\n                                </button>\n                            </div>\n                        </div>\n                        <div className=\"right\">\n                            <div className=\"row\">\n                                <label>Skill 1:</label>\n                                <input defaultValue={skills.one} onChange={(e) => setSkills({one: e.target.value})} />\n                            </div>\n\n                            <div className=\"row\">\n                                <label>Skill 2:</label>\n                                <input defaultValue={skills.two} onChange={(e) => setType({two: e.target.value})} />\n                            </div>\n\n                            <div className=\"row\">\n                                <label>Skill 3:</label>\n                                <input defaultValue={skills.three} onChange={(e) => setDescription({three: e.target.value})} />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            }\n        </div>\n    );\n}\n\nexport default PetsCreatePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}